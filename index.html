<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🗣️ M4 Oral Exam Study Helper</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <link rel="stylesheet" href="style.css">
</head>
<body class="centered">
    <header>
        <div class="wrapper">
            <button id="back-button">&larr; Back</button>
        </div>
        <div class="wrapper mid">
            <select name="filter" id="filter">
                <option value="Filter: Cultural & Literary Studies">Filter: Cultural & Literary Studies</option>
                <option value="Filter: Cultural Studies">Filter: Cultural Studies</option>
                <option value="Filter: Literary Studies">Filter: Literary Studies</option>
            </select>
        </div>
        <div class="wrapper right">
            <button id="sound-toggle-button" class="animate__animated">Sound On 🔊</button>
        </div>
    </header>
    <main class="centered">
        <div id="menu" class="centered animate__animated">
            <h1 class="animate__animated animate__jackInTheBox">M4 Oral Exam Study Helper</h1>
            <p>This site can help you study for the British M4 oral exam at the <em>🎓Technical University of Dortmund</em>.
                It offers you question prompts from British Literary and Cultural Studies that you can try to answer. It can also help practise your speech :)
            </p>
            <button id="start-button">Let's Start</button>
        </div>
        <div id="question-panel" class="centered hidden animate__animated" aria-hidden="true">
            <h1 id="question">Question</h1>
            <button id="question-button">Next Question</button>
        </div>
    </main>
    <footer class="centered">
        <p>Made with 💜 by Gino Glink</p>
        <a href="mailto:gino.glink@tu-dortmund.de" id="mail">gino.glink@tu-dortmund.de</a>
    </footer>
    <script>
        let sound = true, inMenu = true
        let questionSound = new Audio('Question.mp3');

        const questions = [
            "What do Eagleton/Terry say about the definition of literature as 'imaginative' writing in the sense of fiction?",
            "According to Eagleton/Terry: Who are the 'Formalists'?"
        ]
        const colours = ["#27ae60", "#16a085", "#2980b9", "#f39c12", "#d35400", "#c0392b"]
        const fgColours = ["#2ecc71", "#1abc9c", "#3498db", "#f1c40f", "#e67e22", "#e74c3c"]
        const linkColours = ["#f1c40f", "#f1c40f", "#f1c40f", "#2c3e50", "#2c3e50", "#2c3e50"]

        const menu = document.getElementById("menu")
        const questionPanel = document.getElementById("question-panel")
        const question = document.getElementById("question")
        const soundToggleButton = document.getElementById("sound-toggle-button")

        document.getElementById("start-button").addEventListener("click", () => {
            menu.classList.add("animate__fadeOut")
            inMenu = false   
        })
        document.getElementById("question-button").addEventListener("click", () => loadQuestion())
        soundToggleButton.addEventListener("click", () => {
            sound = !sound
            soundToggleButton.innerText = "Sound " + (sound ? "On" : "Off") + " 🔊"
            soundToggleButton.classList.add("animate__rubberBand")
        })
        soundToggleButton.addEventListener("animationend", () => soundToggleButton.classList.remove("animate__rubberBand"))

        function loadQuestion() {
            question.innerText = questions[Math.floor(Math.random() * questions.length)]
            let randomIndex = Math.floor(Math.random() * colours.length)
            document.body.style.background = colours[randomIndex]
            question.style.background = fgColours[randomIndex]
            document.getElementById("mail").style.color = linkColours[randomIndex]

            if (sound) {
                questionSound.currentTime = 0
                questionSound.play()
            }
        }

        menu.addEventListener("animationend", () => {
            if (!inMenu) {
                document.querySelector("header").classList.add("in")
                menu.classList.add("hidden")
                menu.ariaHidden = true
                
                questionPanel.classList.remove("hidden")
                questionPanel.classList.add("animate__bounceInDown")
                questionPanel.ariaHidden = false

                loadQuestion()
            }
        })

        document.getElementById("back-button").addEventListener("click", () => {
            document.querySelector("header").classList.replace("in", "out")
            location.reload()            
        })
    </script>
</body>
</html>